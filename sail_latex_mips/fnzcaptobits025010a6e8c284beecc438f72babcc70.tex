function #\hyperref[sailMIPSzcapToBits]{capToBits}#(cap) : Capability -> #\hyperref[sailMIPSzbits]{bits}#(128) = {
  t_hi : #\hyperref[sailMIPSzbits]{bits}#(9)  = cap.T[11..3];
  t_lo : #\hyperref[sailMIPSzbits]{bits}#(3)  = cap.T[2..0];
  b_hi : #\hyperref[sailMIPSzbits]{bits}#(11) = cap.B[13..3];
  b_lo : #\hyperref[sailMIPSzbits]{bits}#(3)  = cap.B[2..0];
  if cap.internal_e then {
    t_lo = cap.E[5..3];
    b_lo = cap.E[2..0];
  };
  return (cap.uperms
    @ #\hyperref[sailMIPSzgetCapHardPerms]{getCapHardPerms}#(cap)
    @ cap.reserved
    @ cap.otype
    @ cap.internal_e
    @ t_hi
    @ t_lo
    @ b_hi
    @ b_lo
    @ cap.address
  );
}
