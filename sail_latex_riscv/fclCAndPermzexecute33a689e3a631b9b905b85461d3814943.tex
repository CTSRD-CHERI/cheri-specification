let cs1_val = #\hyperref[sailRISCVzC]{C}#(cs1);
let rs2_val = #\hyperref[sailRISCVzX]{X}#(rs2);

let perms = #\hyperref[sailRISCVzgetCapPerms]{getCapPerms}#(cs1_val);
let mask = #\hyperref[sailRISCVztruncate]{truncate}#(rs2_val, cap_perms_width);

let inCap = #\hyperref[sailRISCVzclearTagIfSealed]{clearTagIfSealed}#(cs1_val);
let newCap = #\hyperref[sailRISCVzsetCapPerms]{setCapPerms}#(inCap, (perms & mask));

#\hyperref[sailRISCVzC]{C}#(cd) = newCap;
RETIRE_SUCCESS
