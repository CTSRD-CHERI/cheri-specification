function #\hyperref[sailRISCVzhandlezycherizycapzyexception]{handle\_cheri\_cap\_exception}#(capEx, regnum) =
  {
    if #\hyperref[sailRISCVzgetzyconfigzyprintzyplatform]{get\_config\_print\_platform}#()
    then #\hyperref[sailRISCVzprintzyplatform]{print\_platform}#("CHERI " ^ #\hyperref[sailRISCVzstringzyofzycapex]{string\_of\_capex}#(capEx) ^ " Reg=" ^ #\hyperref[sailRISCVzBitStr]{BitStr}#(regnum));
    let t : sync_exception = struct {
      trap    = #\hyperref[sailRISCVzEzyExtension]{E\_Extension}#(EXC_CHERI),
      excinfo = #\hyperref[sailRISCVzSome]{Some}#(#\hyperref[sailRISCVzEXTZ]{EXTZ}#(regnum @ #\hyperref[sailRISCVzCapExCode]{CapExCode}#(capEx)) : xlenbits),
      ext     = #\hyperref[sailRISCVzNone]{None}#()
    };
    #\hyperref[sailRISCVzsetzynextzypc]{set\_next\_pc}#(#\hyperref[sailRISCVzexceptionzyhandler]{exception\_handler}#(cur_privilege, #\hyperref[sailRISCVzCTLzyTRAP]{CTL\_TRAP}#(t), PC))
  }
