assert(sizeof(xlen) >= 64);
let rs1_val_D = #\hyperref[sailRISCVzFzyorzyXzyD]{F\_or\_X\_D}#(rs1);
match (#\hyperref[sailRISCVzselectzyinstrzyorzyfcsrzyrm]{select\_instr\_or\_fcsr\_rm}# (rm)) {
  #\hyperref[sailRISCVzNone]{None}#() => { #\hyperref[sailRISCVzhandlezyillegal]{handle\_illegal}#(); RETIRE_FAIL },
  #\hyperref[sailRISCVzSome]{Some}#(rm') => {
    let rm_3b = #\hyperref[sailRISCVzencdeczyroundingzymode]{encdec\_rounding\_mode}#(rm');
    let (fflags, rd_val_LU) = #\hyperref[sailRISCVzriscvzyf64ToUi64]{riscv\_f64ToUi64}# (rm_3b, rs1_val_D);

    #\hyperref[sailRISCVzwritezyfflags]{write\_fflags}#(fflags);
    #\hyperref[sailRISCVzX]{X}#(rd) = #\hyperref[sailRISCVzEXTS]{EXTS}#(rd_val_LU);
    RETIRE_SUCCESS
  }
}
