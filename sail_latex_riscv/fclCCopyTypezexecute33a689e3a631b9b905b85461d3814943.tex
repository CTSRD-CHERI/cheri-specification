let cs1_val = #\hyperref[sailRISCVzC]{C}#(cs1);
let cs2_val = #\hyperref[sailRISCVzC]{C}#(cs2);

let reserved = #\hyperref[sailRISCVzhasReservedOType]{hasReservedOType}#(cs2_val);
let otype : xlenbits = if reserved then #\hyperref[sailRISCVzEXTS]{EXTS}#(cs2_val.otype)
                                   else #\hyperref[sailRISCVzEXTZ]{EXTZ}#(cs2_val.otype);

let inCap = #\hyperref[sailRISCVzclearTagIfSealed]{clearTagIfSealed}#(cs1_val);
let (representable, newCap) = #\hyperref[sailRISCVzsetCapAddr]{setCapAddr}#(inCap, otype);

#\hyperref[sailRISCVzC]{C}#(cd) = #\hyperref[sailRISCVzclearTagIf]{clearTagIf}#(newCap, reserved | #\hyperref[sailRISCVznot]{not}#(representable));
RETIRE_SUCCESS
