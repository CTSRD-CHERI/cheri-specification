if #\hyperref[sailRISCVzspeculatezyconditional]{speculate\_conditional}# () == false then {
  /* should only happen in rmem
   * rmem: allow SC to fail very early
   */
  #\hyperref[sailRISCVzC]{C}#(cs2) = #\hyperref[sailRISCVzintzytozycap]{int\_to\_cap}#(#\hyperref[sailRISCVzEXTZ]{EXTZ}#(0b1));
  RETIRE_SUCCESS
} else if #\hyperref[sailRISCVzhaveAtomics]{haveAtomics}#() then {
  let cs1_val = #\hyperref[sailRISCVzC]{C}#(cs1);
  let vaddr = cs1_val.address;
  #\hyperref[sailRISCVzhandlezystorezycondzycapzyviazycap]{handle\_store\_cond\_cap\_via\_cap}#(cs2, 0b0 @ cs1, cs1_val, vaddr)
} else {
  #\hyperref[sailRISCVzhandlezyillegal]{handle\_illegal}#();
  RETIRE_FAIL
}
