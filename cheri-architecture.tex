\ifdefined\trformat
\documentclass[12pt,twoside,openright,a4paper]{report}
\setlength{\oddsidemargin}{-0.4mm} % 25 mm left margin
\setlength{\evensidemargin}{\oddsidemargin}
\setlength{\textwidth}{160mm}      % 25 mm right margin
\setlength{\topmargin}{-5.4mm}     % 20 mm top margin
\setlength{\headheight}{5mm}
\setlength{\headsep}{5mm}
\setlength{\footskip}{10mm}
\setlength{\textheight}{237mm}     % 20 mm bottom margin
\else
\documentclass[12pt,letterpaper,twoside,openright,fleqn]{report}
\usepackage{etex}
\fi

\input{preamble}

\begin{document}
\title{Capability Hardware Enhanced RISC Instructions: \\
  \smallskip CHERI Instruction-Set Architecture \\
  {\large Version 9}}
\author{
  \parbox{\linewidth}{\centering%
    Robert~N.~M.~Watson,
    Peter~G.~Neumann,
    Jonathan~Woodruff,
    Michael~Roe,
    Hesham~Almatary,
    Jonathan~Anderson,
    John~Baldwin,
    Graeme~Barnes,
    David~Chisnall,
    Jessica~Clarke,
    Brooks~Davis,
    Lee~Eisen,
    Nathaniel~Wesley~Filardo,
    Franz~A.~Fuchs,
    Richard~Grisenthwaite,
    Alexandre~Joannou,
    Ben~Laurie,
    A.~Theodore~Markettos,
    Simon~W.~Moore,
    Steven~J.~Murdoch,
    Kyndylan~Nienhuis,
    Robert~Norton,
    Alexander~Richardson,
    Peter~Rugg,
    Peter~Sewell,
    Stacey~Son, and
    Hongyan~Xia
  }%
  \\
  \\
  SRI International, University of Cambridge, and Arm Limited
}
\date{1st November 2023}

%% CL tech-report format provides its own cover page
\ifdefined\trformat
\else
\begin{minipage}[h]{\textwidth}
  %\vspace{-.2cm}
  \maketitle

  %\vspace{-0.2cm}
  {\scriptsize
    Approved for public release; distribution is unlimited.
    Sponsored by the Defense Advanced Research Projects Agency (DARPA) and the
    Air Force Research Laboratory (AFRL), under contract FA8750-10-C-0237
    (``CTSRD''), with additional support from FA8750-11-C-0249 (``MRC2''),
    HR0011-18-C-0016 (``ECATS''), FA8650-18-C-7809 (``CIFV''),
    HR0011-22-C-0110 (``ETC''), and HR0011-23-C-0031 (``MTSS'') as part of
    the DARPA CRASH, MRC, and SSITH research programs.
    The views, opinions, and/or findings contained in this report are those of
    the authors and should not be interpreted as representing the official
    views or policies, either expressed or implied, of the Department of
    Defense or the U.S. Government.

    \smallskip
    This work was supported in part by the Innovate UK project Digital
    Security by Design (DSbD) Technology Platform Prototype, 105694.

    \smallskip
    Additional support was received from St John's College Cambridge,
    the Google SOAAP Focused Research Award, a Google Chrome University
    Research Program Award, the RCUK's Horizon Digital Economy Research Hub
    Grant (EP/G065802/1), the EPSRC REMS Programme Grant (EP/K008528/1), the
    EPSRC Impact Acceleration Account (EP/K503757/1), the EPSRC IOSEC grant
    (EP/R012458/1), the EPSRC CHaOS grant (EP/V000292/1), the EPSRC SIPP grant
    (EP/S030867/1), the ERC Advanced Grant ELVER (789108), the Isaac Newton
    Trust, the UK Higher Education Innovation Fund (HEIF), Thales E-Security,
    Microsoft Research Cambridge, Arm Limited, Google DeepMind, HP Enterprise,
    and a Gates Cambridge Scholarship.

}
\end{minipage}
\fi

\normalsize

%% CL tech-report format requires page numbering to start at 3
\ifdefined\trformat
\setcounter{page}{3}
\fi

%% For revisions sent for editing, prefer double spacing.
%\doublespacing
%%

\clearpage

\input{LICENSE}

\clearpage

\input{LICENSE-sail-cheri-riscv}

\clearpage

\input{LICENSE-sail-riscv}

\clearpage

\input{abstract}

\clearpage

\input{acknowledgments}

\clearpage

\tableofcontents

\clearpage

\input{chap-intro}
\input{chap-model}
\input{chap-architecture}
\input{chap-cheri-riscv}
\input{chap-cheri-x86-64}
\input{chap-sail}
\input{chap-isaref-riscv}
\input{chap-isaref-x86-64}
\input{chap-rationale}
\input{chap-assurance}
\input{chap-microarchitecture}
\input{chap-research}
\input{chap-historical}
\input{chap-conclusion}

\appendix

\input{app-versions}

\input{app-isaquick-riscv}

\input{app-experimental}

\input{app-cheri-concentrate-listings.tex}
\input{app-cheri-128.tex}

\glsaddall
\printglossaries

\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{Bibliography}
\printbibliography

%\chapter*{Index}

\end{document}
