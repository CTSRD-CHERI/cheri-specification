\clearpage
\phantomsection
\addcontentsline{toc}{subsection}{CMPXCHG -- Compare and Exchange}
\insnxeslabel{cmpxchg}
\subsection*{CMPXCHG -- Compare and Exchange}

\begin{x86opcodetable}
  \xopcode{CAP + 0F B1 \emph{/r}}{CMPXCHG \emph{r/mc, rc}}
  {MR}{Valid}{Valid}
  {Compare CAX with \emph{r/mc}. If equal, store \emph{rc} to
    \emph{r/mc}, else load \emph{r/mc} into CAX.}
\end{x86opcodetable}

\begin{x86opentable}
  \xopen{MR}{ModRM:r/m (r,w)}{ModRM:reg (r)}{NA}{NA}
\end{x86opentable}

\subsubsection*{Description}

Compares \CAX{} with the destination operand.  If the values are
equal, stores the source operand in the destination operand.  If the
values are not equal, loads the destination operand into \CAX{}.

The instruction can be used with a \insnnoref{LOCK} prefix to execute
atomically.

\subsubsection*{Flags Affected}

The OF, SF, ZF, AF, CF, and PF flags are set according to the value of
the result of comparing \CAX{} with the destination operand.
